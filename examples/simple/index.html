<!DOCTYPE html>
<html>
  <head>
    <title>simple example</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css">
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.0.0/handlebars.js"></script>
    <script src="http://builds.emberjs.com/release/ember.js"></script>
    <script src="../../dist/ember-simple-auth.js"></script>
  </head>
  <body>
    <div class="container">
      <script type="text/x-handlebars">
        {{#if session.isAuthenticated}}
          {{#link-to 'logout' tagName='button' classNames='btn btn-danger'}}
            Logout
          {{/link-to}}
        {{else}}
          {{#link-to 'login' tagName='button' classNames='btn btn-success'}}
            Login
          {{/link-to}}
        {{/if}}

        {{outlet}}
      </script>
      <script type="text/x-handlebars" data-template-name="login">
        <form role="form" {{action login on="submit"}}>
          <div class="form-group">
            <label for="identification">Login</label>
            {{view Ember.TextField id="identification" valueBinding="identification" placeholder="Enter Login" class="form-control"}}
          </div>
          <div class="form-group">
            <label for="password">Password</label>
            {{view Ember.TextField id="password" valueBinding="password" placeholder="Enter Password" class="form-control"}}
          </div>
          <button type="submit" class="btn btn-default">Login</button>
        </form>
      </script>
    </div>
    <script>
      Ember.Application.initializer({
        name: 'authentication',
        initialize: function(container, application) {
          Ember.SimpleAuth.setup(application);
          Ember.SimpleAuth.serverSessionRoute = 'http://localhost:9292'
        }
      });
      App = Ember.Application.create({});
      App.Router.map(function() {
        this.route('login');
        this.route('logout');
      });
      App.LoginController = Ember.Controller.extend(Ember.SimpleAuth.LoginControllerMixin);
      App.LogoutRoute = Ember.Route.extend(Ember.SimpleAuth.LogoutRouteMixin);
    </script>
  </body>
</html>
